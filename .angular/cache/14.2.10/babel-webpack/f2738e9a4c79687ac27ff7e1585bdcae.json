{"ast":null,"code":"import _asyncToGenerator from \"C:/attendenceFrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ViewContainerRef, ComponentFactoryResolver } from '@angular/core';\nimport axios from 'axios';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Registration, singletonAuth } from \"../../classes\";\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction LoginComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\", 20);\n    i0.ÉµÉµtext(1, \" email invalid\");\n    i0.ÉµÉµelementEnd();\n  }\n}\n\nexport class LoginComponent {\n  constructor(router, vcr, cfr) {\n    this.router = router;\n    this.vcr = vcr;\n    this.cfr = cfr;\n    this.loginForm = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('')\n    });\n    this.loginText = \"\";\n  }\n\n  ngOnInit() {}\n\n  sendLoginRequest(email, password) {\n    const registration = new Registration(email.value, password.value);\n    console.log(registration);\n    const JSONOBJ = JSON.stringify(registration);\n    console.log(JSONOBJ);\n    axios.post('http://localhost:8888/api/login', JSONOBJ, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      if (response.data == \"failed password\" || response.data == \"Email doesn't exist\") {\n        this.loginText = \"password or email incorrect\";\n        console.log(response.data, \"this.logintext\", this.loginText);\n      } else {\n        console.log(response.data.accessToken, \" access token\");\n        const auth = singletonAuth.getInstance(response.data.accessToken);\n        const stringfyUser = JSON.stringify(registration);\n        localStorage.setItem('registered', stringfyUser);\n\n        if (response.data.accessControl === 1) {\n          console.log(response.data.accessControl, \" in TEACHER CONRTOLLKER\");\n          let promiseArr = [];\n          promiseArr[0] = this.getAllStudents(response.data.accessToken);\n          promiseArr[1] = this.getAllStudentAttendences(response.data.accessToken);\n          promiseArr[2] = this.getAttendenceCode(response.data.accessToken);\n          promiseArr[3] = this.getGroupPercentages(response.data.accessToken);\n          Promise.all(promiseArr).then(values => {\n            console.log(values);\n            console.log(\"inside teacher promise\");\n            this.loadTeacherDashboard();\n          }).catch(error => console.log('error'));\n        } else if (response.data.accessControl === 0) {\n          console.log(response.data.accessControl, \" in student CONRTOLLKER\");\n          let promiseArr = [];\n          promiseArr[0] = this.getAttendenceData(response.data.accessToken);\n          console.log(this.getAttendenceData(response.data.accessToken));\n          promiseArr[1] = this.getUserData(response.data.accessToken);\n          promiseArr[2] = this.getLectureData(response.data.accessToken);\n          Promise.all(promiseArr).then(values => {\n            console.log(values);\n            console.log(\"inside promise\");\n            this.loadDashboard();\n          }).catch(error => console.log('error'));\n        }\n      }\n\n      console.log(response);\n    }).catch(error => {\n      // Error ğŸ˜¨\n      if (error.response) {\n        /*\r\n         * The request was made and the server responded with a\r\n         * status code that falls out of the range of 2xx\r\n         */\n        this.loginText = \"User doesn't exist or credentials incorrect\";\n        console.log(\"this.logintext\", this.loginText);\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else if (error.request) {\n        /*\r\n         * The request was made but no response was received, `error.request`\r\n         * is an instance of XMLHttpRequest in the browser and an instance\r\n         * of http.ClientRequest in Node.js\r\n         */\n        console.log(error.request);\n      } else {\n        // Something happened in setting up the request and triggered an Error\n        console.log('Error', error.message);\n      }\n\n      console.log(error.config);\n    });\n    console.log(email.value);\n  }\n\n  getGroupPercentages(accessToken) {\n    return new Promise((resolve, reject) => {\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/attendence/getGroupAttendence', yourConfig).then(response => {\n        if (response.data == \"Admin Only Access\" || response.data == \"Some error occurred while getting group attendence.\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \": group Percentages\");\n          localStorage.setItem('groupPercentages', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n        reject(error);\n      });\n    });\n  }\n\n  loadTeacherDashboard() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.vcr.clear();\n\n      const {\n        TeacherDashboardComponent\n      } = yield import('../teacher-dashboard/teacher-dashboard.component');\n\n      _this.vcr.createComponent(_this.cfr.resolveComponentFactory(TeacherDashboardComponent));\n\n      _this.router.navigate(['/teacherDashboard']);\n    })();\n  }\n\n  loadDashboard() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.vcr.clear();\n\n      const {\n        DashboardComponent\n      } = yield import('../dashboard/dashboard.component');\n\n      _this2.vcr.createComponent(_this2.cfr.resolveComponentFactory(DashboardComponent));\n\n      _this2.router.navigate(['/dashboard']);\n    })();\n  }\n\n  getAttendenceCode(accessToken) {\n    return new Promise((resolve, reject) => {\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/attendence/getAttendCode', yourConfig).then(response => {\n        if (response.data == \"Admin Only Access\" || response.data == \"Some error occurred while getting attendCode.\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \": attend Code\");\n          localStorage.setItem('attendCode', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n        reject(error);\n      });\n    });\n  }\n\n  getAllStudentAttendences(accessToken) {\n    return new Promise((resolve, reject) => {\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/attendence/getAllAttendences', yourConfig).then(response => {\n        if (response.data == \"token not valid\" || response.data == \"Access denied\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \": teacher All Attendences\");\n          localStorage.setItem('allStudentAttendences', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n        reject(error);\n      });\n    });\n  }\n\n  getAllStudents(accessToken) {\n    return new Promise((resolve, reject) => {\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/students/getAll', yourConfig).then(response => {\n        if (response.data == \"Admin Only Access\" || response.data == \"Email doesn't exist\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \": All Students\");\n          localStorage.setItem('allStudents', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n        reject(error);\n      });\n    });\n  }\n\n  getAttendenceData(accessToken) {\n    return new Promise((resolve, reject) => {\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/attendence/getAttendence', yourConfig).then(response => {\n        if (response.data == \"failed password\" || response.data == \"Email doesn't exist\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \": json user Attendence\");\n          localStorage.setItem('attendence', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n        reject(error);\n      });\n    });\n  }\n\n  getLectureData(accessToken) {\n    return new Promise((resolve, reject) => {\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/lectures/allLectures', yourConfig).then(response => {\n        if (response.data == \"failed password\" || response.data == \"Email doesn't exist\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \"  : lectures response\");\n          localStorage.setItem('lectures', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          /*\r\n           * The request was made and the server responded with a\r\n           * status code that falls out of the range of 2xx\r\n           */\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n      });\n    });\n  }\n\n  getTeacherData(accessToken) {\n    return new Promise((resolve, reject) => {\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/teachers/getTeacher', yourConfig).then(response => {\n        if (response.data == \"failed password\" || response.data == \"Email doesn't exist\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \"   : user data response\");\n          localStorage.setItem('user', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          /*\r\n           * The request was made and the server responded with a\r\n           * status code that falls out of the range of 2xx\r\n           */\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n      });\n    });\n  }\n\n  getUserData(accessToken) {\n    return new Promise((resolve, reject) => {\n      console.log(\"hiadsfasdfasdfaswdfsdfaaaaaaaaaaaaaaaaaaa\");\n      const yourConfig = {\n        headers: {\n          Authorization: accessToken\n        }\n      };\n      axios.get('http://localhost:8888/api/students/getOneStudent', yourConfig).then(response => {\n        if (response.data == \"failed password\" || response.data == \"Email doesn't exist\") {} else {\n          const jsonUser = JSON.stringify(response.data);\n          console.log(jsonUser, \"   : user data response\");\n          localStorage.setItem('user', jsonUser);\n          resolve(response);\n        }\n      }).catch(error => {\n        // Error ğŸ˜¨\n        if (error.response) {\n          /*\r\n           * The request was made and the server responded with a\r\n           * status code that falls out of the range of 2xx\r\n           */\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request and triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n      });\n    });\n  }\n\n}\n\nLoginComponent.Éµfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ÉµÉµdirectiveInject(i1.Router), i0.ÉµÉµdirectiveInject(i0.ViewContainerRef), i0.ÉµÉµdirectiveInject(i0.ComponentFactoryResolver));\n};\n\nLoginComponent.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 28,\n  vars: 3,\n  consts: [[1, \"vh-100\", \"gradient-custom\"], [1, \"container\", \"py-5\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-12\", \"col-md-8\", \"col-lg-6\", \"col-xl-5\"], [1, \"card\", \"bg-dark\", \"text-white\", 2, \"border-radius\", \"1rem\"], [1, \"card-body\", \"p-5\", \"text-center\"], [1, \"mb-md-5\", \"mt-md-4\", \"pb-5\"], [1, \"fw-bold\", \"mb-2\", \"text-uppercase\"], [1, \"text-white-50\", \"mb-5\"], [3, \"formGroup\"], [1, \"form-outline\", \"form-white\", \"mb-4\", \"form-group\"], [\"for\", \"typeEmailX\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"typeEmailX\", \"formControlName\", \"email\", 1, \"form-control\", \"form-control-lg\"], [\"email\", \"\"], [\"class\", \"badge bg-danger\", 4, \"ngIf\"], [1, \"form-outline\", \"form-white\", \"mb-4\"], [\"for\", \"typePasswordX\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"typePasswordX\", 1, \"form-control\", \"form-control-lg\"], [\"password\", \"\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-light\", \"btn-lg\", \"px-5\", 3, \"click\"], [1, \"badge\", \"bg-danger\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ÉµÉµgetCurrentView();\n\n      i0.ÉµÉµelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"h2\", 7);\n      i0.ÉµÉµtext(8, \"Login\");\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelementStart(9, \"p\", 8);\n      i0.ÉµÉµtext(10, \"Please enter your login and password!\");\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelementStart(11, \"form\", 9)(12, \"div\", 10)(13, \"label\", 11);\n      i0.ÉµÉµtext(14, \"Email\");\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelement(15, \"input\", 12, 13);\n      i0.ÉµÉµtemplate(17, LoginComponent_span_17_Template, 2, 0, \"span\", 14);\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelementStart(18, \"div\", 15)(19, \"label\", 16);\n      i0.ÉµÉµtext(20, \"Password\");\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelement(21, \"input\", 17, 18);\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelement(23, \"br\");\n      i0.ÉµÉµelementStart(24, \"h3\");\n      i0.ÉµÉµtext(25);\n      i0.ÉµÉµelementEnd();\n      i0.ÉµÉµelementStart(26, \"button\", 19);\n      i0.ÉµÉµlistener(\"click\", function LoginComponent_Template_button_click_26_listener() {\n        i0.ÉµÉµrestoreView(_r3);\n\n        const _r0 = i0.ÉµÉµreference(16);\n\n        const _r2 = i0.ÉµÉµreference(22);\n\n        return i0.ÉµÉµresetView(ctx.sendLoginRequest(_r0, _r2));\n      });\n      i0.ÉµÉµtext(27, \"Login \");\n      i0.ÉµÉµelementEnd()()()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ÉµÉµadvance(11);\n      i0.ÉµÉµproperty(\"formGroup\", ctx.loginForm);\n      i0.ÉµÉµadvance(6);\n      i0.ÉµÉµproperty(\"ngIf\", !ctx.loginForm.controls[\"email\"].valid && (ctx.loginForm.controls[\"email\"] == null ? null : ctx.loginForm.controls[\"email\"].touched));\n      i0.ÉµÉµadvance(8);\n      i0.ÉµÉµtextInterpolate1(\" \", ctx.loginText, \"\");\n    }\n  },\n  dependencies: [i2.NgIf, i3.ÉµNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ViewContainerRef","ComponentFactoryResolver","axios","FormControl","FormGroup","Validators","Registration","singletonAuth","Router","i0","LoginComponent","constructor","router","vcr","cfr","email","required","password","ngOnInit","sendLoginRequest","registration","value","console","log","JSONOBJ","JSON","stringify","post","headers","then","response","data","loginText","accessToken","auth","getInstance","stringfyUser","localStorage","setItem","accessControl","promiseArr","getAllStudents","getAllStudentAttendences","getAttendenceCode","getGroupPercentages","Promise","all","values","loadTeacherDashboard","catch","error","getAttendenceData","getUserData","getLectureData","loadDashboard","status","request","message","config","resolve","reject","yourConfig","Authorization","get","jsonUser","clear","TeacherDashboardComponent","createComponent","resolveComponentFactory","navigate","DashboardComponent","getTeacherData","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\attendenceFrontEnd\\src\\app\\login\\login.component.ts","C:\\attendenceFrontEnd\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit, ViewContainerRef, ComponentFactoryResolver  } from '@angular/core';\r\nimport axios from 'axios';\r\nimport { FormControl, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\r\nimport {Registration,Student, singletonAuth} from \"../../classes\"\r\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { NavigationExtras } from '@angular/router';\r\nimport { JsonPipe } from '@angular/common';\r\nimport { data } from 'jquery';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  loginForm = new FormGroup({\r\n    email: new FormControl('',[Validators.required, Validators.email]),\r\n    password: new FormControl('')\r\n  })\r\n\r\n  constructor(public router :Router, private vcr:ViewContainerRef, private cfr: ComponentFactoryResolver) { }\r\n\r\n  loginText = \"\";\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n\r\n  sendLoginRequest(email: any, password: any){\r\n    const registration = new Registration(email.value, password.value);\r\n   \r\n    console.log(registration)\r\n    const JSONOBJ = JSON.stringify(registration);\r\n    console.log(JSONOBJ)\r\n    axios.post('http://localhost:8888/api/login', JSONOBJ, {headers:{'Content-Type':'application/json'}})\r\n    .then((response) => {\r\n      if (response.data ==\"failed password\" || response.data == \"Email doesn't exist\"){\r\n\r\n        this.loginText = \"password or email incorrect\"\r\n        console.log(response.data, \"this.logintext\", this.loginText)\r\n      }else{\r\n        console.log(response.data.accessToken, \" access token\");\r\n\r\n        const auth = singletonAuth.getInstance(response.data.accessToken);\r\n        const stringfyUser = JSON.stringify(registration);\r\n        localStorage.setItem('registered',stringfyUser)\r\n\r\n        \r\n        if(response.data.accessControl === 1){\r\n          console.log(response.data.accessControl, \" in TEACHER CONRTOLLKER\")\r\n          let promiseArr: Promise<any>[] = [];\r\n          promiseArr[0] = this.getAllStudents(response.data.accessToken);\r\n          promiseArr[1] = this.getAllStudentAttendences(response.data.accessToken);\r\n          promiseArr[2] = this.getAttendenceCode(response.data.accessToken);\r\n          promiseArr[3] = this.getGroupPercentages(response.data.accessToken);\r\n          Promise.all(promiseArr).then((values) => {\r\n            console.log(values)\r\n            console.log(\"inside teacher promise\");\r\n            this.loadTeacherDashboard();\r\n          }).catch(error=> console.log('error'))\r\n          \r\n         \r\n\r\n        }else if(response.data.accessControl === 0){\r\n\r\n          console.log(response.data.accessControl, \" in student CONRTOLLKER\")\r\n          let promiseArr: Promise<any>[] = [];\r\n          promiseArr[0] = this.getAttendenceData(response.data.accessToken)\r\n          console.log(this.getAttendenceData(response.data.accessToken))\r\n          promiseArr[1] = this.getUserData(response.data.accessToken)\r\n          promiseArr[2] = this.getLectureData(response.data.accessToken)\r\n  \r\n          Promise.all(promiseArr).then((values) => {\r\n            console.log(values)\r\n            console.log(\"inside promise\");\r\n            this.loadDashboard();\r\n          }).catch(error=> console.log('error'))\r\n        }\r\n\r\n         \r\n        \r\n        \r\n        \r\n      }\r\n      console.log(response);\r\n     \r\n  })\r\n  .catch((error) => {\r\n      // Error ğŸ˜¨\r\n      if (error.response) {\r\n          /*\r\n           * The request was made and the server responded with a\r\n           * status code that falls out of the range of 2xx\r\n           */\r\n          this.loginText = \"User doesn't exist or credentials incorrect\"\r\n          console.log( \"this.logintext\", this.loginText)\r\n          console.log(error.response.data);\r\n          console.log(error.response.status);\r\n          console.log(error.response.headers);\r\n      } else if (error.request) {\r\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\r\n          console.log(error.request);\r\n      } else {\r\n          // Something happened in setting up the request and triggered an Error\r\n          console.log('Error', error.message);\r\n      }\r\n      console.log(error.config);\r\n  });\r\n    \r\n    console.log(email.value);\r\n\r\n  }\r\n\r\n  getGroupPercentages(accessToken: string):Promise<any>{\r\n    return new Promise((resolve, reject )=>{\r\n      const yourConfig = {\r\n        headers: {\r\n           Authorization: accessToken\r\n        }\r\n     }\r\n     axios.get('http://localhost:8888/api/attendence/getGroupAttendence', yourConfig)\r\n     .then((response) => {\r\n       if(response.data ==\"Admin Only Access\" || response.data == \"Some error occurred while getting group attendence.\"){\r\n       }else{\r\n         const jsonUser = JSON.stringify(response.data)\r\n         console.log(jsonUser, \": group Percentages\")\r\n         localStorage.setItem('groupPercentages',jsonUser)\r\n         resolve(response);\r\n       }\r\n    })\r\n    .catch((error) => {\r\n       // Error ğŸ˜¨\r\n       if (error.response) {\r\n           \r\n           console.log(error.response.data);\r\n           console.log(error.response.status);\r\n           console.log(error.response.headers);\r\n       } else if (error.request) {\r\n           /*\r\n            * The request was made but no response was received, `error.request`\r\n            * is an instance of XMLHttpRequest in the browser and an instance\r\n            * of http.ClientRequest in Node.js\r\n            */\r\n           console.log(error.request);\r\n       } else {\r\n           // Something happened in setting up the request and triggered an Error\r\n           console.log('Error', error.message);\r\n       }\r\n       console.log(error.config);\r\n       reject(error)\r\n    });\r\n    })\r\n  \r\n  }\r\n\r\nasync loadTeacherDashboard(){\r\n\r\n  this.vcr.clear();\r\n  const {TeacherDashboardComponent} = await import('../teacher-dashboard/teacher-dashboard.component');\r\n  this.vcr.createComponent(this.cfr.resolveComponentFactory(TeacherDashboardComponent));\r\n  this.router.navigate(['/teacherDashboard']);\r\n}\r\n\r\nasync loadDashboard(){\r\n  this.vcr.clear();\r\n  const {DashboardComponent} = await import('../dashboard/dashboard.component');\r\n  this.vcr.createComponent(this.cfr.resolveComponentFactory(DashboardComponent));\r\n\r\n\r\n  this.router.navigate(['/dashboard']);\r\n}\r\n\r\n\r\ngetAttendenceCode(accessToken: string):Promise<any>{\r\n  return new Promise((resolve, reject )=>{\r\n    const yourConfig = {\r\n      headers: {\r\n         Authorization: accessToken\r\n      }\r\n   }\r\n   axios.get('http://localhost:8888/api/attendence/getAttendCode', yourConfig)\r\n   .then((response) => {\r\n     if(response.data ==\"Admin Only Access\" || response.data == \"Some error occurred while getting attendCode.\"){\r\n     }else{\r\n       const jsonUser = JSON.stringify(response.data)\r\n       console.log(jsonUser, \": attend Code\")\r\n       localStorage.setItem('attendCode',jsonUser)\r\n       resolve(response);\r\n     }\r\n  })\r\n  .catch((error) => {\r\n     // Error ğŸ˜¨\r\n     if (error.response) {\r\n         \r\n         console.log(error.response.data);\r\n         console.log(error.response.status);\r\n         console.log(error.response.headers);\r\n     } else if (error.request) {\r\n         /*\r\n          * The request was made but no response was received, `error.request`\r\n          * is an instance of XMLHttpRequest in the browser and an instance\r\n          * of http.ClientRequest in Node.js\r\n          */\r\n         console.log(error.request);\r\n     } else {\r\n         // Something happened in setting up the request and triggered an Error\r\n         console.log('Error', error.message);\r\n     }\r\n     console.log(error.config);\r\n     reject(error)\r\n  });\r\n  })\r\n\r\n}\r\n\r\ngetAllStudentAttendences(accessToken: string):Promise<any>{\r\n  return new Promise((resolve, reject )=>{\r\n    const yourConfig = {\r\n      headers: {\r\n         Authorization: accessToken\r\n      }\r\n   }\r\n   axios.get('http://localhost:8888/api/attendence/getAllAttendences', yourConfig)\r\n   .then((response) => {\r\n     if(response.data ==\"token not valid\" || response.data == \"Access denied\"){\r\n     }else{\r\n       const jsonUser = JSON.stringify(response.data)\r\n       console.log(jsonUser, \": teacher All Attendences\")\r\n       localStorage.setItem('allStudentAttendences',jsonUser)\r\n       resolve(response);\r\n     }\r\n  })\r\n  .catch((error) => {\r\n     // Error ğŸ˜¨\r\n     if (error.response) {\r\n         \r\n         console.log(error.response.data);\r\n         console.log(error.response.status);\r\n         console.log(error.response.headers);\r\n     } else if (error.request) {\r\n         /*\r\n          * The request was made but no response was received, `error.request`\r\n          * is an instance of XMLHttpRequest in the browser and an instance\r\n          * of http.ClientRequest in Node.js\r\n          */\r\n         console.log(error.request);\r\n     } else {\r\n         // Something happened in setting up the request and triggered an Error\r\n         console.log('Error', error.message);\r\n     }\r\n     console.log(error.config);\r\n     reject(error)\r\n  });\r\n  })\r\n}\r\n\r\ngetAllStudents(accessToken: string):Promise<any>{\r\n  return new Promise((resolve, reject )=>{\r\n    \r\n    const yourConfig = {\r\n      headers: {\r\n         Authorization: accessToken\r\n      }\r\n   }\r\n   axios.get('http://localhost:8888/api/students/getAll', yourConfig)\r\n   .then((response) => {\r\n     if(response.data ==\"Admin Only Access\" || response.data == \"Email doesn't exist\"){\r\n     }else{\r\n       const jsonUser = JSON.stringify(response.data)\r\n       console.log(jsonUser, \": All Students\")\r\n       localStorage.setItem('allStudents',jsonUser)\r\n       resolve(response);\r\n     }\r\n  })\r\n  .catch((error) => {\r\n     // Error ğŸ˜¨\r\n     if (error.response) {\r\n         \r\n         console.log(error.response.data);\r\n         console.log(error.response.status);\r\n         console.log(error.response.headers);\r\n     } else if (error.request) {\r\n         /*\r\n          * The request was made but no response was received, `error.request`\r\n          * is an instance of XMLHttpRequest in the browser and an instance\r\n          * of http.ClientRequest in Node.js\r\n          */\r\n         console.log(error.request);\r\n     } else {\r\n         // Something happened in setting up the request and triggered an Error\r\n         console.log('Error', error.message);\r\n     }\r\n     console.log(error.config);\r\n     reject(error)\r\n  });\r\n  })\r\n}\r\n\r\n getAttendenceData(accessToken: string):Promise<any>  {\r\n  return new Promise((resolve, reject )=>{\r\n    const yourConfig = {\r\n      headers: {\r\n         Authorization: accessToken\r\n      }\r\n   }\r\n   axios.get('http://localhost:8888/api/attendence/getAttendence', yourConfig)\r\n   .then((response) => {\r\n     if(response.data ==\"failed password\" || response.data == \"Email doesn't exist\"){\r\n     }else{\r\n       const jsonUser = JSON.stringify(response.data)\r\n       console.log(jsonUser, \": json user Attendence\")\r\n       localStorage.setItem('attendence',jsonUser)\r\n       resolve(response);\r\n     }\r\n  })\r\n  .catch((error) => {\r\n     // Error ğŸ˜¨\r\n     if (error.response) {\r\n         \r\n         console.log(error.response.data);\r\n         console.log(error.response.status);\r\n         console.log(error.response.headers);\r\n     } else if (error.request) {\r\n         /*\r\n          * The request was made but no response was received, `error.request`\r\n          * is an instance of XMLHttpRequest in the browser and an instance\r\n          * of http.ClientRequest in Node.js\r\n          */\r\n         console.log(error.request);\r\n     } else {\r\n         // Something happened in setting up the request and triggered an Error\r\n         console.log('Error', error.message);\r\n     }\r\n     console.log(error.config);\r\n     reject(error)\r\n  });\r\n  })\r\n}\r\n\r\n\r\ngetLectureData(accessToken:string) :Promise<any> {\r\n\r\n  return new Promise((resolve, reject )=>{\r\n\r\n    \r\n  const yourConfig = {\r\n    headers: {\r\n       Authorization: accessToken\r\n    }\r\n }\r\n axios.get('http://localhost:8888/api/lectures/allLectures', yourConfig)\r\n .then((response) => {\r\n   if(response.data ==\"failed password\" || response.data == \"Email doesn't exist\"){\r\n   }else{\r\n     const jsonUser = JSON.stringify(response.data)\r\n     console.log(jsonUser, \"  : lectures response\")\r\n     localStorage.setItem('lectures',jsonUser)\r\n     resolve(response)\r\n   }\r\n  \r\n})\r\n.catch((error) => {\r\n   // Error ğŸ˜¨\r\n   if (error.response) {\r\n       /*\r\n        * The request was made and the server responded with a\r\n        * status code that falls out of the range of 2xx\r\n        */\r\n       console.log(error.response.data);\r\n       console.log(error.response.status);\r\n       console.log(error.response.headers);\r\n   } else if (error.request) {\r\n       /*\r\n        * The request was made but no response was received, `error.request`\r\n        * is an instance of XMLHttpRequest in the browser and an instance\r\n        * of http.ClientRequest in Node.js\r\n        */\r\n       console.log(error.request);\r\n   } else {\r\n       // Something happened in setting up the request and triggered an Error\r\n       console.log('Error', error.message);\r\n   }\r\n   console.log(error.config);\r\n});\r\n  });\r\n\r\n\r\n\r\n}\r\n\r\ngetTeacherData(accessToken:string) :Promise<any> {\r\n  return new Promise((resolve, reject )=>{\r\n\r\n    \r\n    const yourConfig = {\r\n      headers: {\r\n         Authorization: accessToken\r\n      }\r\n   }\r\n    axios.get('http://localhost:8888/api/teachers/getTeacher', yourConfig)\r\n    .then((response) => {\r\n      if(response.data ==\"failed password\" || response.data == \"Email doesn't exist\"){\r\n      }else{\r\n        \r\n        const jsonUser = JSON.stringify(response.data)\r\n        console.log(jsonUser, \"   : user data response\")\r\n        \r\n        localStorage.setItem('user',jsonUser)\r\n        resolve(response)\r\n  \r\n      }\r\n  })\r\n  .catch((error) => {\r\n      // Error ğŸ˜¨\r\n      if (error.response) {\r\n          /*\r\n           * The request was made and the server responded with a\r\n           * status code that falls out of the range of 2xx\r\n           */\r\n          console.log(error.response.data);\r\n          console.log(error.response.status);\r\n          console.log(error.response.headers);\r\n      } else if (error.request) {\r\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\r\n          console.log(error.request);\r\n      } else {\r\n          // Something happened in setting up the request and triggered an Error\r\n          console.log('Error', error.message);\r\n      }\r\n      console.log(error.config);\r\n  });\r\n  });\r\n}\r\n\r\ngetUserData(accessToken:string) :Promise<any> {\r\n  return new Promise((resolve, reject )=>{\r\n\r\n    console.log(\"hiadsfasdfasdfaswdfsdfaaaaaaaaaaaaaaaaaaa\")\r\n    const yourConfig = {\r\n      headers: {\r\n         Authorization: accessToken\r\n      }\r\n   }\r\n    axios.get('http://localhost:8888/api/students/getOneStudent', yourConfig)\r\n    .then((response) => {\r\n      if(response.data ==\"failed password\" || response.data == \"Email doesn't exist\"){\r\n      }else{\r\n        \r\n        const jsonUser = JSON.stringify(response.data)\r\n        console.log(jsonUser, \"   : user data response\")\r\n        \r\n        localStorage.setItem('user',jsonUser)\r\n        resolve(response)\r\n  \r\n      }\r\n  })\r\n  .catch((error) => {\r\n      // Error ğŸ˜¨\r\n      if (error.response) {\r\n          /*\r\n           * The request was made and the server responded with a\r\n           * status code that falls out of the range of 2xx\r\n           */\r\n          console.log(error.response.data);\r\n          console.log(error.response.status);\r\n          console.log(error.response.headers);\r\n      } else if (error.request) {\r\n          /*\r\n           * The request was made but no response was received, `error.request`\r\n           * is an instance of XMLHttpRequest in the browser and an instance\r\n           * of http.ClientRequest in Node.js\r\n           */\r\n          console.log(error.request);\r\n      } else {\r\n          // Something happened in setting up the request and triggered an Error\r\n          console.log('Error', error.message);\r\n      }\r\n      console.log(error.config);\r\n  });\r\n  });\r\n}\r\n}\r\n","\r\n\r\n\r\n\r\n    <section class=\"vh-100 gradient-custom\">\r\n        <div class=\"container py-5 h-100\">\r\n          <div class=\"row d-flex justify-content-center align-items-center h-100\">\r\n            <div class=\"col-12 col-md-8 col-lg-6 col-xl-5\">\r\n              <div class=\"card bg-dark text-white\" style=\"border-radius: 1rem;\">\r\n                <div class=\"card-body p-5 text-center\">\r\n      \r\n                  <div class=\"mb-md-5 mt-md-4 pb-5\">\r\n      \r\n                    <h2 class=\"fw-bold mb-2 text-uppercase\">Login</h2>\r\n                    <p class=\"text-white-50 mb-5\">Please enter your login and password!</p>\r\n                    \r\n                    <form [formGroup] = \"loginForm\">\r\n\r\n                      <div class=\"form-outline form-white mb-4 form-group\">\r\n                        <label class=\"form-label\" for=\"typeEmailX\">Email</label>\r\n                        <input type=\"email\" id=\"typeEmailX\" class=\"form-control form-control-lg\" formControlName=\"email\" #email/>\r\n                        <span class=\"badge bg-danger\" *ngIf=\"!loginForm.controls['email'].valid && \r\n                        loginForm.controls['email']?.touched\"> email invalid</span>\r\n                        \r\n                      </div>\r\n        \r\n                      <div class=\"form-outline form-white mb-4\">\r\n\r\n                        <label class=\"form-label\" for=\"typePasswordX\">Password</label>\r\n                        <input type=\"password\" id=\"typePasswordX\" class=\"form-control form-control-lg\" #password />\r\n                       \r\n                        \r\n                      </div>\r\n        \r\n                      <br>\r\n                      <h3> {{loginText}}</h3>\r\n        \r\n                      <button  class=\"btn btn-outline-light btn-lg px-5\" type=\"submit\" (click) =\"sendLoginRequest(email,password)\">Login </button>\r\n\r\n                    </form>\r\n      \r\n                    \r\n      \r\n                 \r\n      \r\n                  </div>\r\n      \r\n                  \r\n      \r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}