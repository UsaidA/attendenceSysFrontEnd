{"ast":null,"code":"import { Attendence, singletonAuth } from 'src/classes';\nimport { sendAttendenceData } from 'src/services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\n\nfunction TeacherDashboardComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function TeacherDashboardComponent_tr_38_Template_input_ngModelChange_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const Group_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(Group_r1.hasAttended = $event);\n    })(\"change\", function TeacherDashboardComponent_tr_38_Template_input_change_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const Group_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.checkVal(Group_r1.attendenceID, Group_r1.studentID, Group_r1.lectureID, Group_r1.hasAttended ? \"true\" : \"false\"));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const Group_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", Group_r1.studentID, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", Group_r1.lectureID, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", Group_r1.hasAttended);\n  }\n}\n\nexport let TeacherDashboardComponent = /*#__PURE__*/(() => {\n  class TeacherDashboardComponent {\n    constructor(router) {\n      this.router = router;\n      this.firstName = \"\";\n      this.lastName = \"\";\n      this.email = \"\";\n      this.academicAdvisor = \"\";\n      this.courseName = \"\";\n      this.temp = \"\";\n      this.attendCode = \"\";\n      this.aData = [];\n      this.dtOptions = {};\n    }\n\n    ngOnInit() {\n      this.getAttendenceData();\n      this.getAttendCode();\n      this.dtOptions = {\n        pagingType: 'full_numbers',\n        pageLength: 5,\n        lengthMenu: [5, 15, 25],\n        processing: true\n      };\n    }\n\n    getAttendCode() {\n      if (localStorage.getItem('attendCode') === null) {\n        console.log(\"local storage has no attend code\");\n      } else {\n        // let attendCodeStored: string = JSON.parse(localStorage.getItem('attendCode') || '{}');\n        // this.attendCode = attendCodeStored[0];\n        // console.log(attendCodeStored, \" : attendCode from storage\")\n        // console.log(this.attendCode, \"  : this attend Code\")\n        var jsonString = localStorage.getItem('attendCode') || '{}';\n        var newString = jsonString.substring(1, jsonString.length - 1);\n        const obj = JSON.parse(newString);\n        this.attendCode = obj.attendCode;\n        console.log(obj.attendCode);\n      }\n    }\n\n    getAttendenceData() {\n      if (localStorage.getItem('allStudentAttendences') === null) {\n        console.log(\"local storage has no attendence\");\n      } else {\n        let attendenceFromStorage = JSON.parse(localStorage.getItem('allStudentAttendences') || '{}');\n        this.aData = attendenceFromStorage;\n        console.log(attendenceFromStorage, \" :attendencefromstorage\");\n        console.log(this.aData, \"  : this.aData\");\n      }\n    }\n\n    checkVal(attendenceID, studentID, lectureID, hasAttended) {\n      console.log(attendenceID, studentID, lectureID, hasAttended);\n\n      if (hasAttended === 'true') {\n        console.log(\"hi\");\n        hasAttended = 1;\n      } else if (hasAttended === 'false') {\n        hasAttended = 0;\n      }\n\n      var attendence = new Attendence(attendenceID, studentID, lectureID, hasAttended);\n      console.log(attendence);\n      var jwtToken = localStorage.getItem('jwtToken');\n\n      if (jwtToken == null) {\n        console.log(\"null issue in teacher dashboard\");\n      } else {\n        sendAttendenceData(jwtToken, attendence);\n      }\n\n      console.log(jwtToken);\n    }\n\n    LogOut() {\n      //const auth = singletonAuth.getInstance(\"\");\n      singletonAuth.logOut();\n      this.router.navigate(['/']);\n      this.ngOndestroy();\n    }\n\n    ngOndestroy() {\n      console.log(\"teacher dashboard destroyed\");\n    }\n\n  }\n\n  TeacherDashboardComponent.ɵfac = function TeacherDashboardComponent_Factory(t) {\n    return new (t || TeacherDashboardComponent)(i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  TeacherDashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TeacherDashboardComponent,\n    selectors: [[\"app-teacher-dashboard\"]],\n    decls: 41,\n    vars: 6,\n    consts: [[1, \"container-xl\", \"px-4\", \"mt-4\"], [1, \"mt-0\", \"mb-4\"], [1, \"row\"], [1, \"col-xl-4\"], [1, \"card\", \"mb-4\", \"mb-xl-0\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"row\", \"gx-3\", \"mb-3\"], [1, \"col-md-6\"], [\"for\", \"inputFirstName\", 1, \"small\", \"mb-1\"], [\"for\", \"inputLastName\", 1, \"small\", \"mb-1\"], [1, \"mb-3\"], [\"for\", \"inputEmailAddress\", 1, \"small\", \"mb-1\"], [1, \"small\", \"mb-1\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 2, \"color\", \"rgb(255, 255, 255)\", \"background-color\", \"rgb(18, 19, 43)\", \"border-radius\", \"4px\", \"font-weight\", \"700\", 3, \"click\"], [1, \"col-xl-8\"], [\"datatable\", \"\", 1, \"table\", \"table-striped\", \"table-bordered\", \"table-sm\", \"row-border\", \"hover\", 3, \"dtOptions\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"checkbox\", 3, \"ngModel\", \"ngModelChange\", \"change\"]],\n    template: function TeacherDashboardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"hr\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6);\n        i0.ɵɵtext(7, \"Teacher Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"form\")(10, \"div\", 8)(11, \"div\", 9)(12, \"label\", 10);\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 9)(15, \"label\", 11);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"div\", 12)(18, \"label\", 13);\n        i0.ɵɵtext(19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 12)(21, \"label\", 14);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(23, \"div\", 8);\n        i0.ɵɵelementStart(24, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function TeacherDashboardComponent_Template_button_click_24_listener() {\n          return ctx.LogOut();\n        });\n        i0.ɵɵtext(25, \"Log Out\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(26, \"div\", 16)(27, \"div\")(28, \"table\", 17)(29, \"thead\")(30, \"tr\")(31, \"th\");\n        i0.ɵɵtext(32, \"StudentID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"th\");\n        i0.ɵɵtext(34, \"LectureID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"th\");\n        i0.ɵɵtext(36, \"hasAttended\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(37, \"tbody\");\n        i0.ɵɵtemplate(38, TeacherDashboardComponent_tr_38_Template, 7, 3, \"tr\", 18);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtext(39, \" \\u00A0 \");\n        i0.ɵɵelement(40, \"div\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵtextInterpolate1(\"First name: \", ctx.firstName, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Last name: \", ctx.lastName, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Email address: \", ctx.email, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Student Attend Code: \", ctx.attendCode, \"\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"dtOptions\", ctx.dtOptions);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.aData);\n      }\n    }\n  });\n  return TeacherDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}